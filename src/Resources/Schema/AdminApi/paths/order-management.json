{
    "openapi": "3.0.0",
    "info": [],
    "paths": {
        "\/_action\/order\/{orderId}\/ratepay\/info": {
            "get": {
                "tags": [
                    "Order Management"
                ],
                "summary": "gets the current state of ratepay processed order-items",
                "operationId": "ratepayOrderItemsInfo",
                "description": "",
                "parameters": [
                    {
                        "name": "orderId",
                        "in": "path",
                        "required": true,
                        "description": "Identifier of the order",
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9a-f]{32}$"
                        },
                        "example": "a06c753d068c487991d6a833b4133560"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "information about the line-items which got processed by Ratepay",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "success": {
                                            "default": true
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "string",
                                                        "description": "Identifier of the order-line-item. Can be also `shipping` for the shipping position.",
                                                        "example": "a06c753d068c487991d6a833b4133560",
                                                        "pattern": "^[0-9a-f]{32}$"
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "description": "name of the order-line-item",
                                                        "example": "Yellow shirt"
                                                    },
                                                    "ordered": {
                                                        "type": "number",
                                                        "description": "ordered quantity of order-line-item. In case of the shipping item, this will be always `1`.",
                                                        "example": 5
                                                    },
                                                    "unitPrice": {
                                                        "type": "number",
                                                        "description": "unit price of order-line-item",
                                                        "example": 8.99
                                                    },
                                                    "totalPrice": {
                                                        "type": "number",
                                                        "description": "total price of order-line-item",
                                                        "example": 39.95
                                                    },
                                                    "position": {
                                                        "description": "information about how many items has been shipped/returned/canceled on the Ratepay gateway",
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {
                                                                "type": "string",
                                                                "description": "identifier of entity which stores these data.",
                                                                "pattern": "^[0-9a-f]{32}$"
                                                            },
                                                            "canceled": {
                                                                "type": "number",
                                                                "description": "count of items which has been marked as canceled"
                                                            },
                                                            "returned": {
                                                                "type": "number",
                                                                "description": "count of items which has been marked as returned"
                                                            },
                                                            "delivered": {
                                                                "type": "number",
                                                                "description": "count of items which has been marked as delivered"
                                                            },
                                                            "maxDelivery": {
                                                                "type": "number",
                                                                "description": "Remaining number of products which can be shipped"
                                                            },
                                                            "maxCancel": {
                                                                "type": "number",
                                                                "description": "Remaining number of products which can be canceled"
                                                            },
                                                            "maxReturn": {
                                                                "type": "number",
                                                                "description": "Remaining number of products which can be returned"
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "if order is not found",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "properties": {
                                        "status": {
                                            "type": "boolean",
                                            "default": false
                                        },
                                        "message": {
                                            "type": "string",
                                            "default": "Oder not found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/_action\/order\/{orderId}\/ratepay\/deliver": {
            "post": {
                "tags": [
                    "Order Management"
                ],
                "summary": "report delivery of order-line-items of order processed by Ratepay",
                "operationId": "ratepayOrderItemDeliver",
                "parameters": [
                    {
                        "name": "orderId",
                        "in": "path",
                        "required": true,
                        "description": "Identifier of the order",
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9a-f]{32}$"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/ratepayOrderOperationRequestBody"
                            }
                        }
                    }
                },
                "responses": {
                    "204": {
                        "description": "item(s) has been successfully delivered"
                    },
                    "400": {
                        "description": "the provided order-line-items does not belongs to the order, or the quantity is zero."
                    },
                    "404": {
                        "description": "the order does not exist."
                    },
                    "500": {
                        "description": "an error occurred during the delivery",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "$ref": "#\/components\/schemas\/ratepayOrderOperationResponse500"
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/_action\/order\/{orderId}\/ratepay\/cancel": {
            "post": {
                "tags": [
                    "Order Management"
                ],
                "summary": "cancel order-line-items of order processed by Ratepay",
                "operationId": "ratepayOrderItemCancel",
                "parameters": [
                    {
                        "name": "orderId",
                        "in": "path",
                        "required": true,
                        "description": "Identifier of the order",
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9a-f]{32}$"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/ratepayOrderOperationRequestBody"
                            }
                        }
                    }
                },
                "responses": {
                    "204": {
                        "description": "item(s) has been successfully canceled"
                    },
                    "400": {
                        "description": "the provided order-line-items does not belongs to the order, or the quantity is zero."
                    },
                    "404": {
                        "description": "the order does not exist."
                    },
                    "500": {
                        "description": "an error occurred during the cancellation",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "$ref": "#\/components\/schemas\/ratepayOrderOperationResponse500"
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/_action\/order\/{orderId}\/ratepay\/refund": {
            "post": {
                "tags": [
                    "Order Management"
                ],
                "summary": "refund order-line-items of order processed by Ratepay",
                "operationId": "ratepayOrderItemRefund",
                "parameters": [
                    {
                        "name": "orderId",
                        "in": "path",
                        "required": true,
                        "description": "Identifier of the order",
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9a-f]{32}$"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#\/components\/schemas\/ratepayOrderOperationRequestBody"
                            }
                        }
                    }
                },
                "responses": {
                    "204": {
                        "description": "item(s) has been successfully refunded"
                    },
                    "400": {
                        "description": "the provided order-line-items does not belongs to the order, or the quantity is zero."
                    },
                    "404": {
                        "description": "the order does not exist."
                    },
                    "500": {
                        "description": "an error occurred during the refunding",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "$ref": "#\/components\/schemas\/ratepayOrderOperationResponse500"
                                }
                            }
                        }
                    }
                }
            }
        },
        "\/_action\/order\/{orderId}\/ratepay\/addItem": {
            "post": {
                "tags": [
                    "Order Management"
                ],
                "summary": "add order-line-items of order processed by Ratepay",
                "description": "you can add a debit or credit to the processed order by Ratepay. It is required that at least one order-item has been marked as shipped and not returned.",
                "operationId": "ratepayOrderItemAddItem",
                "parameters": [
                    {
                        "name": "orderId",
                        "in": "path",
                        "required": true,
                        "description": "Identifier of the order",
                        "schema": {
                            "type": "string",
                            "pattern": "^[0-9a-f]{32}$"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "grossAmount": {
                                        "type": "number",
                                        "required": true,
                                        "description": "gross amount of debit/credit. Have to be negative for credits.",
                                        "example": -5
                                    },
                                    "name": {
                                        "type": "string",
                                        "required": true,
                                        "description": "description of the order-line-item.",
                                        "example": "discount for damaged goods"
                                    },
                                    "taxId": {
                                        "type": "string",
                                        "required": true,
                                        "description": "tax-id to apply",
                                        "pattern": "^[0-9a-f]{32}$",
                                        "example": "a06c753d068c487991d6a833b4133560"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "204": {
                        "description": "item(s) has been successfully added"
                    },
                    "400": {
                        "description": "the provided order-line-items does not belongs to the order, or the quantity is zero."
                    },
                    "404": {
                        "description": "the order does not exist."
                    },
                    "500": {
                        "description": "an error occurred during the adding",
                        "content": {
                            "application\/json": {
                                "schema": {
                                    "$ref": "#\/components\/schemas\/ratepayOrderOperationResponse500"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
