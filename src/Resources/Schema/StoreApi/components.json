{
    "openapi": "3.0.0",
    "info": {},
    "paths": {},
    "components": {
        "schemas": {
            "RatepayMethodData": {
                "type": "object",
                "description": "This object contains some customer information, which you can use to prefill forms.",
                "properties": {
                    "installment": {
                        "type": "object",
                        "properties": {
                            "calculator": {
                                "type": "object",
                                "properties": {
                                    "defaults": {
                                        "type": "object",
                                        "properties": {
                                            "type": {
                                                "type": "string",
                                                "description": "Default calculation type. `time` is used to specify the number of monthly-rates. With `rate`, the customer can specify how much he will pay monthly. ",
                                                "enum": [
                                                    "time",
                                                    "rate"
                                                ]
                                            },
                                            "value": {
                                                "type": "integer",
                                                "description": "Default value, for customer input."
                                            }
                                        },
                                        "description": "Defines default settings for the calculation-type"
                                    },
                                    "rp_allowedMonths": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        },
                                        "description": "List of months which is allowed with the actual cart/order-items"
                                    },
                                    "rp_minimumRate": {
                                        "type": "number",
                                        "description": "minimum amount of monthly rate"
                                    },
                                    "rp_maximumRate": {
                                        "type": "number",
                                        "description": "maximum amount of monthly rate"
                                    }
                                }
                            },
                            "translations": {
                                "$ref": "#/components/schemas/RatepayInstallmentCalculatorTranslations"
                            },
                            "plan": {
                                "$ref": "#/components/schemas/RatepayInstallmentPlan"
                            }
                        }
                    },
                    "accountHolders": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "description": "provide these account holders for SEPA mandates. the customer is allowed to provide the customer-name or the company name. These property will hold these values."
                    },
                    "birthday": {
                        "type": "object",
                        "description": "The birthday of the customer.",
                        "properties": {
                            "year": {
                                "type": "integer"
                            },
                            "month": {
                                "type": "integer"
                            },
                            "day": {
                                "type": "integer"
                            }
                        }
                    },
                    "phoneNumber": {
                        "type": "string",
                        "description": "The phone-number of the customer. Note: may be in different formats."
                    },
                    "company": {
                        "type": "string",
                        "description": "The company name if the user selected a B2B address"
                    },
                    "vatId": {
                        "type": "string",
                        "description": "The vat-id if the user selected a B2B address"
                    },
                    "isSandbox": {
                        "type": "boolean",
                        "description": "`true` if the Ratepay module if the current profile is in sandbox mode."
                    },
                    "paymentMethod": {
                        "type": "string",
                        "description": "Contains the current Ratepay payment method.",
                        "enum": [
                            "elv",
                            "invoice",
                            "prepayment",
                            "installment"
                        ]
                    },
                    "dfp": {
                        "type": "object",
                        "description": "This snippet has to loaded one-time. The token may change, e.g. when switching the payment method. When the token changes, you have re-implement the snippet again.<br>Please also see https://docs.ratepay.com/docs/developer/device_fingerprinting/device_fingerprinting/",
                        "properties": {
                            "deviceIdentToken": {
                                "type": "string",
                                "description": "unique token to identify the current user and session. Do not generate a new token by your self."
                            },
                            "html": {
                                "type": "string",
                                "description": "HTML Snippet which contains the script to implement."
                            },
                            "snippetId": {
                                "type": "string",
                                "description": "Snippet ID which the merchant got from Ratepay."
                            }
                        }
                    }
                }
            },
            "RatepayPaymentData": {
                "type": "object",
                "description": "This object is used for handle-payment. This object contains all required payment-data for Ratepay-payments",
                "required": true,
                "properties": {
                    "installment": {
                        "type": "object",
                        "required": true,
                        "description": "Data for installment calculation. required, if payment method is installment.",
                        "properties": {
                            "type": {
                                "$ref": "#/components/schemas/RatepayInstallmentCalculationType"
                            },
                            "value": {
                                "$ref": "#/components/schemas/RatepayInstallmentCalculationValue"
                            },
                            "hash": {
                                "type": "string"
                            }
                        }
                    },
                    "deviceIdentToken": {
                        "type": "string",
                        "required": true,
                        "description": "Device Ident Token (DFP) which is provided by /ratepay/payment-data. Please do not modify."
                    },
                    "bankData": {
                        "type": "object",
                        "required": true,
                        "description": "required if the customer select debit as payment method (or als payment method for installments)",
                        "properties": {
                            "accountHolder": {
                                "type": "string",
                                "required": true,
                                "description": "name of the customer or the company"
                            },
                            "iban": {
                                "type": "string",
                                "required": true,
                                "description": "IBAN of the bank account"
                            },
                            "sepaConfirmation": {
                                "type": "boolean",
                                "required": true,
                                "description": "needs to be `true`. The value is require to make sure the customer has confirmed the SEPA mandate."
                            }
                        }
                    }
                }
            },
            "RatepayInstallmentCalculationType": {
                "type": "string",
                "description": "Provide the type of calculation. <br>Use `time` to calculate the installment based on a specific time. The installment plan will exactly match this runtime.<br>Use `rate` to calculate the installment based of a specific monthly interest. The calculator will find the nearest matching monthly rate for the provided rate.",
                "required": true,
                "enum": ["time", "rate"]
            },
            "RatepayInstallmentCalculationValue": {
                "type": "number",
                "description": "Provide the value for the calculation. Please see parameter `type` for more details.",
                "required": true,
                "minimum": 1
            },
            "RatepayInstallmentResponse": {
                "type": "object",
                "properties": {
                    "translations": {
                        "$ref": "#/components/schemas/RatepayInstallmentCalculatorTranslations"
                    },
                    "plan": {
                        "$ref": "#/components/schemas/RatepayInstallmentPlan"
                    }
                }
            },
            "RatepayInstallmentPlan": {
                "type": "object",
                "properties": {
                    "totalAmount": {
                        "type": "number",
                        "description": "Total amount to be paid by the shopper, calculated by the shopping cart amount, contract signing fee and interest amount."
                    },
                    "amount": {
                        "type": "number",
                        "description": "Sum of all products in the basket including shipping."
                    },
                    "interestRate": {
                        "type": "number",
                        "description": "Interest-rate which will be used to calculate the annual percentage rate"
                    },
                    "interestAmount": {
                        "type": "number",
                        "description": "Sum of money resulting from the interest rate."
                    },
                    "serviceCharge": {
                        "type": "number",
                        "description": "Additional costs of financing"
                    },
                    "annualPercentageRate": {
                        "type": "number",
                        "description": "Interest-rate based on service-charge and interest-rate"
                    },
                    "monthlyDebitInterest": {
                        "type": "number",
                        "description": "Monthly interest rates based on annual-percentage-rate"
                    },
                    "numberOfRatesFull": {
                        "type": "integer",
                        "deprecated": true
                    },
                    "numberOfRates": {
                        "type": "integer",
                        "description": "Number of months; duration of the instalment plan"
                    },
                    "rate": {
                        "type": "number",
                        "description": "Monthly rate to be paid by the customer"
                    },
                    "lastRate": {
                        "type": "number",
                        "description": "Last monthly rate to be paid by the customer"
                    },
                    "paymentFirstday": {
                        "type": "number",
                        "description": "Calendar day of the first payment",
                        "enum": [
                            2,
                            28
                        ]
                    },
                    "responseText": {
                        "type": "string",
                        "description": "Short text about the calculation result."
                    },
                    "hash": {
                        "type": "string",
                        "description": "This hash got calculated based on the installment plan to easily compare in during validations and place-order.<br>You have to submit this value during the payment process."
                    },
                    "payment": {
                        "type": "object",
                        "properties": {
                            "bankTransferAllowed": {
                                "type": "boolean",
                                "description": "`true` if the bank-transfer payment is allowed with this installment-plan"
                            },
                            "directDebitAllowed": {
                                "type": "boolean",
                                "description": "`true` if the bank-transfer payment is allowed with this installment-plan"
                            },
                            "default": {
                                "type": "string",
                                "enum": [
                                    "DIRECT-DEBIT",
                                    "BANK-TRANSFER"
                                ],
                                "description": "Default payment method for this installment-plan."
                            }
                        }
                    }
                }
            },
            "RatepayInstallmentCalculatorTranslations": {
                "type": "object",
                "description": "a list of translation, which you can use for the frontend. Does not contain data related for the plan. Currently only the languages EN and DE are supported. <br>The translations got provided by the php-sdk of Ratepay. So the values may change in the future."
            }
        }
    }
}
