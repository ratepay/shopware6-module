{% block ratepay_profile_config_detail %}
    <sw-page class="ratepay-profile-config-detail">
        <template slot="smart-bar-actions">
            <sw-button :routerLink="{ name: 'ratepay.profileConfig.list' }">
                {{ $t('ratepay.profile_config.page.detail.cancelButtonText') }}
            </sw-button>

            <sw-button-process
                :isLoading="isLoading"
                :processSuccess="processSuccess"
                variant="primary"
                @process-finish="saveFinish"
                @click="onClickSave">
                {{ $t('ratepay.profile_config.page.detail.saveButtonText') }}
            </sw-button-process>

            <sw-button-process
                v-if="entity && entity.isNew() === false && entity.status"
                :key="entity.status"
                :isLoading="isLoading"
                :processSuccess="processSuccess"
                variant="primary"
                :disabled="disabledReloadButton"
                @click="onClickReloadConfig">
                {{ $t('ratepay.profile_config.page.detail.reloadConfig') }}
            </sw-button-process>
        </template>

        <template slot="content">
            <sw-card-view>
                <sw-card v-if="entity" :isLoading="isLoading">
                    <sw-field v-on:change="lockReloadButton" :label="$t('ratepay.profile_config.global.labels.profile_id')" v-model="entity.profileId" required></sw-field>
                    <sw-field v-on:change="lockReloadButton" :label="$t('ratepay.profile_config.global.labels.security_code')" v-model="entity.securityCode" required></sw-field>
                    <sw-switch-field v-on:change="lockReloadButton" :label="$t('ratepay.profile_config.global.labels.sandbox')" v-model="entity.sandbox"></sw-switch-field>
                    <sw-switch-field v-on:change="lockReloadButton" :label="$t('ratepay.profile_config.global.labels.backend')" v-model="entity.backend"></sw-switch-field>

                    <sw-entity-single-select
                        v-on:change="lockReloadButton"
                        entity="sales_channel"
                        :label="$t('ratepay.profile_config.global.labels.sales_channel')"
                        v-model="entity.salesChannelId"
                        labelProperty="name"
                        required
                    >
                    </sw-entity-single-select>

                </sw-card>

                <sw-card v-if="entity && entity.status" :isLoading="isLoading">
                    <sw-tabs>
                        <sw-tabs-item
                            @click="switchTab('general')"
                            :active="currentTab === 'general'"
                        >
                            {{ $t('ratepay.profile_config.page.tabs.general.title') }}
                        </sw-tabs-item>

                        <sw-tabs-item v-for="config in paymentConfigs"
                            @click="switchTab(config.paymentMethod)"
                            :active="currentTab === config.paymentMethod"
                            :key="config.id"
                        >
                            {{ $t('ratepay.profile_config.page.tabs.' + config.paymentMethod + '.title') }}
                        </sw-tabs-item>

                    </sw-tabs>

                    <sw-container v-if="currentTab == 'general'" :isLoading="isLoading">
                        <table style="text-align: left;">
                            <tbody>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.tabs.general.table.label.countryCodeBilling') }}</th>
                                    <td>{{ entity.countryCodeBilling }}</td>
                                </tr>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.tabs.general.table.label.countryCodeDelivery') }}</th>
                                    <td>{{ entity.countryCodeDelivery }}</td>
                                </tr>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.tabs.general.table.label.currency') }}</th>
                                    <td>{{ entity.currency }}</td>
                                </tr>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.tabs.general.table.label.errorDefault') }}</th>
                                    <td>{{ entity.errorDefault }}</td>
                                </tr>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.tabs.general.table.label.updatedAt') }}</th>
                                    <td>{{ entity.updatedAt }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </sw-container>

                    <sw-container v-for="config in paymentConfigs"
                      :key="config.id"
                      v-if="currentTab == config.paymentMethod"
                    >
                        <table style="text-align: left;">
                            <tbody>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.allowB2b') }}</th>
                                    <td>{{ config.allowB2b ? $t('global.default.yes') : $t('global.default.no') }}</td>
                                </tr>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.limitMin') }}</th>
                                    <td>{{ config.limitMin }}</td>
                                </tr>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.limitMax') }}</th>
                                    <td>{{ config.limitMax }}</td>
                                </tr>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.limitMaxB2b') }}</th>
                                    <td>{{ config.limitMaxB2b }}</td>
                                </tr>
                                <tr>
                                    <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.allowDifferentAddresses') }}</th>
                                    <td>{{ config.allowDifferentAddresses ? $t('global.default.yes') : $t('global.default.no') }}</td>
                                </tr>
                                <slot v-if="installmentConfigs[config.paymentMethod]">
                                    <tr>
                                        <th colspan="2" style="padding-top: 15px; border-bottom: 1px solid #ccc;">{{ $t('ratepay.profile_config.page.paymentConfig.table.label.installmentHeading') }}</th>
                                    </tr>
                                    <tr>
                                        <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.installment.allowedMonths') }}</th>
                                        <td>{{ installmentConfigs[config.paymentMethod].allowedMonths.join(', ') }}</td>
                                    </tr>
                                    <tr>
                                        <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.installment.isBankTransferAllowed') }}</th>
                                        <td>{{ installmentConfigs[config.paymentMethod].isBankTransferAllowed ? $t('global.default.yes') : $t('global.default.no') }}</td>
                                    </tr>
                                    <tr>
                                        <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.installment.isDebitAllowed') }}</th>
                                        <td>{{ installmentConfigs[config.paymentMethod].isDebitAllowed ? $t('global.default.yes') : $t('global.default.no') }}</td>
                                    </tr>
                                    <tr>
                                        <th>{{ $t('ratepay.profile_config.page.paymentConfig.table.label.installment.rateMin') }}</th>
                                        <td>{{ installmentConfigs[config.paymentMethod].rateMin }}</td>
                                    </tr>
                                </slot>
                            </tbody>
                        </table>
                    </sw-container>
                </sw-card>
            </sw-card-view>
        </template>
    </sw-page>
{% endblock %}
