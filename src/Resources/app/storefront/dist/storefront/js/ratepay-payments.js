(window.webpackJsonp=window.webpackJsonp||[]).push([["ratepay-payments"],{GM1k:function(e,t,n){"use strict";n.r(t);var r=n("FGIj"),i=n("5lm9"),o=n("k8s9");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p,h,y,b=null,f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,c(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){this._runtimeSelect=this.el.querySelector("#rp-btn-runtime"),this._rateInput=this.el.querySelector("#rp-rate-value"),this._rateButton=this.el.querySelector("#rp-rate-button"),this._resultContainer=this.el.querySelector("#rp-result-container"),this._typeHolder=this.el.querySelector("#rp-calculation-type"),this._valueHolder=this.el.querySelector("#rp-calculation-value"),this._registerEvents()}},{key:"_registerEvents",value:function(){this._runtimeSelect.addEventListener("change",this._onSelectRuntime.bind(this)),this._rateInput.addEventListener("input",this._onInputRate.bind(this)),this._rateButton.addEventListener("click",this._onSubmitRate.bind(this))}},{key:"_onSelectRuntime",value:function(){this._fetchInstallmentPlan(this.options.calculationTypeTime,this._runtimeSelect.value)}},{key:"_onInputRate",value:function(){""===this._rateInput.value?this._rateButton.setAttribute("disabled","disabled"):this._rateButton.removeAttribute("disabled")}},{key:"_onSubmitRate",value:function(){this._fetchInstallmentPlan(this.options.calculationTypeRate,this._rateInput.value)}},{key:"_fetchInstallmentPlan",value:function(e,t){var n=this,r=new o.a(window.accessKey,window.contextToken),i="".concat(window.rpInstallmentCalculateUrl,"?type=").concat(e,"&value=").concat(t);this._activateLoader(),b&&b.abort(),b=r.get(i,this._executeCallback.bind(this,(function(r){n._setContent(r),n._typeHolder.value=e,n._valueHolder.value=t})))}},{key:"_activateLoader",value:function(){this._setContent('<div style="text-align: center">'.concat(i.a.getTemplate(),"</div>"))}},{key:"_executeCallback",value:function(e,t){"function"==typeof e&&e(t)}},{key:"_setContent",value:function(e){this._resultContainer.innerHTML=e}}])&&s(n.prototype,r),a&&s(n,a),t}(r.a);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}y={calculationTypeTime:"time",calculationTypeRate:"rate"},(h="options")in(p=f)?Object.defineProperty(p,h,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[h]=y;var S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,v(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){this._sepaForm=this.el.querySelector("#rp-sepa-form"),this._bankTransferLink=this.el.querySelector("#rp-switch-payment-type-bank-transfer"),this._directDebitLink=this.el.querySelector("#rp-switch-payment-type-direct-debit"),this._paymentTypeHolder=this.el.querySelector("#rp-calculation-payment-type"),this._registerEvents()}},{key:"_registerEvents",value:function(){this._bankTransferLink&&this._bankTransferLink.addEventListener("click",this._onSelectBankTransfer.bind(this)),this._directDebitLink&&this._directDebitLink.addEventListener("click",this._onSelectDirectDebit.bind(this))}},{key:"_onSelectBankTransfer",value:function(){this._hideSepaForm(),this._hide(this._bankTransferLink),this._show(this._directDebitLink),this._paymentTypeHolder.value=this.options.paymentTypeBankTransfer}},{key:"_onSelectDirectDebit",value:function(){this._showSepaForm(),this._show(this._bankTransferLink),this._hide(this._directDebitLink),this._paymentTypeHolder.value=this.options.paymentTypeDirectDebit}},{key:"_hideSepaForm",value:function(){this._sepaForm&&(this._hide(this._sepaForm),this._sepaForm.querySelector("#rp-iban-account-holder").removeAttribute("required"),this._sepaForm.querySelector("#rp-iban-account-number").removeAttribute("required"),this._sepaForm.querySelector("#sepaconfirmation").removeAttribute("required"),this._sepaForm.querySelector("#rp-iban-account-holder").setAttribute("disabled","disabled"),this._sepaForm.querySelector("#rp-iban-account-number").setAttribute("disabled","disabled"),this._sepaForm.querySelector("#sepaconfirmation").setAttribute("disabled","disabled"))}},{key:"_showSepaForm",value:function(){this._sepaForm&&(this._show(this._sepaForm),this._sepaForm.querySelector("#rp-iban-account-holder").removeAttribute("disabled"),this._sepaForm.querySelector("#rp-iban-account-number").removeAttribute("disabled"),this._sepaForm.querySelector("#sepaconfirmation").removeAttribute("disabled"),this._sepaForm.querySelector("#rp-iban-account-holder").setAttribute("required","required"),this._sepaForm.querySelector("#rp-iban-account-number").setAttribute("required","required"),this._sepaForm.querySelector("#sepaconfirmation").setAttribute("required","required"))}},{key:"_hide",value:function(e){e&&(e.classList.remove(this.options.showCls),e.classList.add(this.options.hiddenCls))}},{key:"_show",value:function(e){e&&(e.classList.add(this.options.showCls),e.classList.remove(this.options.hiddenCls))}}])&&_(n.prototype,r),i&&_(n,i),t}(r.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(S,"options",{hiddenCls:"d-none",showCls:"d-block",paymentTypeBankTransfer:"BANK-TRANSFER",paymentTypeDirectDebit:"DIRECT-DEBIT"});var w=window.PluginManager;w.register("ratepay-installment",f,'[data-ratepay-installment="true"]'),w.register("ratepay-installment-payment-switch",S,'[data-ratepay-installment-payment-switch="true"]')}},[["GM1k","runtime","vendor-node","vendor-shared"]]]);